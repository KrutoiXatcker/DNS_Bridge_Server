# DNS-сервер для скрытой передачи файлов

Серверная часть системы скрытой передачи данных через DNS-запросы.

## Описание проекта

Сервер:
1. Принимает DNS-запросы на порту 53
2. Извлекает закодированные данные из доменных имен
3. Собирает файл из последовательности запросов
4. Отправляет корректные DNS-ответы

## Особенности реализации

- Работает по UDP протоколу
- Поддерживает стандартные DNS-запросы типа A
- Автоматически собирает переданные файлы
- Логирует все входящие запросы

## Требования

- Linux-система
- Компилятор с поддержкой C++11
- Права root для работы на порту 53

## Установка и запуск

1. Клонируйте репозиторий:
   ```
   git clone https://github.com/DNS_Bridge_Server.git
   cd DNS_Bridge_Server
   ```

2. Скомпилируйте проект:
   ```
   g++ -std=c++11 main.cpp DNS_Server.cpp -o dns_server
   ```
   Или комадной make используя готовый Makefile

3. Подготовьте файлы конфигурации:
- `hostname.txt` - список доменов и IP (пример в репозитории)
- `db` - маппинг доменов для декодирования

4. Запустите сервер (требуются права root):
   ```
   sudo ./dns_server
   ```
   Если будет ошибка создания сокета воспользутесь этой командой
   ```
   sudo systemctl stop systemd-resolved
   ```
   либо другими способами освободтье 53 порт

   ## Формат файлов

### hostname.txt
```
example.com 192.168.1.1
test.org 192.168.1.2
```

### db (для декодирования)
```
example.com 1
test.org 2
```


## Логика работы

1. Клиент отправляет DNS-запросы с закодированными данными
2. Сервер:
   - При получении домена "256" - начинает новую передачу
   - При получении домена "257" - сохраняет собранные данные в файл
   - Для остальных доменов - добавляет соответствующий байт в буфер

## Важно!

- Проект предназначен только для исследовательских целей
- Использование может нарушать политики безопасности сетей
- Требуется настройка файрвола для работы на порту 53








   
